{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2010-09-09-pressflow-or-drupal-on-ubuntu-10-04-and-later-with-nginx/","result":{"data":{"site":{"siteMetadata":{"title":"Lambdacurry"}},"markdownRemark":{"id":"8488a6af-be44-59b5-a150-9629636dd591","excerpt":"For god’s sake do not use PHP 5.3 . Custom compile your own php-fpm 5.2. Maybe setup nginx with clean URL and the configuration given . If you use PHP5.3, then…","html":"<p>For god’s sake do not use PHP 5.3 . Custom compile your own <a href=\"http://www.ivankuznetsov.com/2010/05/moving-joomla-wordpress-and-other-phpfastcgi-apps-to-nginx.html\">php-fpm 5.2</a>. Maybe setup nginx with clean URL and the configuration given .</p>\n<p>If you use PHP5.3, then any failure in any db connection/query (for me it was postgresql) will result in the php thread being killed (”<em>child process exited with status 1</em>”). 5.2 doesnt have this problem.</p>\n<blockquote>\n<p>﻿server {</p>\n<p>listen   8080; ## listen for ipv4\nlisten   [::]:8080 default ipv6only=on; ## listen for ipv6</p>\n<p>server_name  localhost;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">    root /var/www/1/;\n    large\\_client\\_header\\_buffers 4 8k;\n    access\\_log  /var/log/nginx/1.access.log urchin;\n\n   ## Serve an empty 1x1 gif \\_OR\\_ an error 204 (No Content) for favicon.ico\n  location ~\\* ^.+\\\\.(ico) {\n   #empty\\_gif;\n    return 204;\n    expires max;\n  }\n  location ~\\* ^.+\\\\.(jpg|jpeg|gif|css|png|js)(\\\\?\\[0-9\\]+)?$ {\n    root /var/www/1/;\n   access\\_log off;\n    expires max;\n    }\n\n    location / {\n        #root   /var/www/1/;\n        index  index.html index.php;\n        add\\_header Last-Modified &quot;&quot;;\n        if\\_modified\\_since off;\n        error\\_page 404 = @drupal;\n    }\n\n    location @drupal {\n                      rewrite ^(.\\*)$ /index.php?q=$1 last;\n    }\n\n    location ~ \\\\.php$ {\n            #include /usr/local/nginx/conf/fastcgi\\_params;\n            include /etc/nginx/fastcgi\\_params;\n            fastcgi\\_pass  localhost:9000;\n            fastcgi\\_index index.php;\n            fastcgi\\_read\\_timeout 500m;\n            fastcgi\\_param  SCRIPT\\_FILENAME  /var/www/1$fastcgi\\_script\\_name;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>fastcgi_param  SCRIPT_NAME      $fastcgi_script_name;\nfastcgi_param  QUERY_STRING     $query_string;\nfastcgi_param  REQUEST_METHOD   $request_method;\nfastcgi_param  CONTENT_TYPE     $content_type;\nfastcgi_param  CONTENT_LENGTH   $content_length;\nfastcgi_intercept_errors on;\n}\n}</p>\n</blockquote>","frontmatter":{"title":"Pressflow (or Drupal) on Ubuntu 10.04 and later .. with nginx, php-fpm and clean-urls","date":"September 09, 2010"}}},"pageContext":{"slug":"/blog/2010-09-09-pressflow-or-drupal-on-ubuntu-10-04-and-later-with-nginx/","previous":{"fields":{"slug":"/blog/2010-08-25-open-source-intelligence-research-utility-now-available/"},"frontmatter":{"title":"Open Source intelligence research utility now available"}},"next":{"fields":{"slug":"/blog/2010-09-13-using-git-on-windows-without-any-of-the-cygwinmsysgit-nonsense/"},"frontmatter":{"title":"Using Git on Windows without any of the Cygwin/msysgit nonsense"}}}},"staticQueryHashes":["2778469899","2841359383","2882394463","3616023293"]}