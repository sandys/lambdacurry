<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}</style><style data-href="/styles.b090ec9de29a2098d849.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;text-shadow:0 -.1em .2em #000;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}:not(pre)>code[class*=language-],pre[class*=language-]{background:#141414}pre[class*=language-]{border-radius:.5em;border:.3em solid #545454;box-shadow:inset 1px 1px .5em #000;margin:.5em 0;overflow:auto;padding:1em}pre[class*=language-]::selection{background:#27292a}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,93%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;border:.13em solid #545454;box-shadow:inset 1px 1px .3em -.1em #000;padding:.15em .2em .05em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#787878}.token.namespace,.token.punctuation{opacity:.7}.token.boolean,.token.deleted,.token.number,.token.tag{color:#cf694a}.token.builtin,.token.constant,.token.keyword,.token.property,.token.selector,.token.symbol{color:#f9ee9a}.language-css .token.string,.style .token.string,.token.attr-name,.token.attr-value,.token.char,.token.entity,.token.inserted,.token.operator,.token.string,.token.url,.token.variable{color:#919e6b}.token.atrule{color:#7386a5}.token.important,.token.regex{color:#e9c163}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[data-line]{padding:1em 0 1em 3em;position:relative}.language-markup .token.attr-name,.language-markup .token.punctuation,.language-markup .token.tag{color:#ad895c}.token{position:relative;z-index:1}.line-highlight{background:rgba(84,84,84,.25);background:linear-gradient(90deg,rgba(84,84,84,.1) 70%,rgba(84,84,84,0));border-bottom:1px dashed #545454;border-top:1px dashed #545454;left:0;line-height:inherit;margin-top:.75em;padding:inherit 0;pointer-events:none;position:absolute;right:0;white-space:pre;z-index:0}.line-highlight:before,.line-highlight[data-end]:after{background-color:#8794a6;border-radius:999px;box-shadow:0 1px #fff;color:#f5f2f0;content:attr(data-start);font:700 65%/1.5 sans-serif;left:.6em;min-width:1em;padding:0 .5em;position:absolute;text-align:center;text-shadow:none;top:.4em;vertical-align:.3em}.line-highlight[data-end]:after{bottom:.4em;content:attr(data-end);top:auto}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}@tailwind utilities;body{--bg:#fff;--lightBg:#fff;--textNormal:#181818;--textTitle:#181818;--hr:rgba(3,2,2,0.2);background-color:var(--bg)}.sidediv{display:flex;flex-direction:row}.toggle-2{margin:4% 4% 22% 21%;font-family:sans-serif}.toggle-1,.toggle-2{display:flex;flex-direction:column;justify-content:center}.toggle-1{margin:4% 4% 95% 21%}.toggle-1 h6{margin-top:0;font-style:normal;font-family:sans-serif;font-size:15px;cursor:pointer}.toggle-2 ul li{list-style:none;cursor:pointer;font-size:11px}body.dark{-webkit-font-smoothing:antialiased;--bg:#1e1e1e;--lightBg:#0f0f0f;--textNormal:#e0e0e0;--textTitle:#fff;--hr:hsla(0,0%,100%,0.2)}a{text-decoration:none}a.gatsby-resp-image-link:hover{cursor:pointer}blockquote,h1,h2,h3,h4,h5,h6{color:var(--textTitle)}.footnotes{word-break:break-all}.fragments{height:5px;margin-bottom:40px}.blog-date{font-family:sans-serif}.fragments-separator{background:linear-gradient(135deg,transparent 25%,#222 0,#222 50%,transparent 0,transparent 75%,#222 0,#222);background-size:7px 7px;margin-left:0;max-width:700px}.list-head{font-size:55px;font-weight:400}.post-footer{display:flex;margin-top:-30px;margin-left:-12px}.list-head2{font-size:55px;font-weight:400}.list-head2 h1{margin-left:4px}@media (min-width:200px) and (max-width:500px){.list-head,.list-head2{font-size:40px;letter-spacing:-3px}}.blog-links{font-size:14.5px;line-height:17px;text-decoration:underline}.date-blogs{font-size:10px;margin-left:7px}@media (min-width:200px) and (max-width:500px){.date-blogs{margin-left:4px;font-size:9px}.blog-links{font-size:12px}}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;cursor:pointer;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;outline:0}.sidebar{height:200px;width:100%;position:fixed;z-index:1;top:0;left:0;overflow-x:hidden;text-align:center;background-color:var(--lightBg);border-left:solid #35689a;border-width:11px}.main-content{background-color:var(--bg);position:absolute;top:200px;z-index:10;padding:0 20px;margin-left:0}.blog-content{padding:15px}@media only screen and (min-width:768px){.sidebar{height:100vh;width:380px}.main-content{padding:0 100px;height:100vh;width:calc(100% - 380px);margin-left:380px;top:0}}@media only screen and (min-width:480px) and (max-width:768px){.sidediv,.toggle{display:flex}.toggle{align-items:center;flex-direction:row;justify-content:center;margin:4% 4% 4% 21%}.toggle ul li{list-style:none;cursor:pointer;margin:3%}.toggle ul{display:flex;flex-direction:row}}@media only screen and (min-width:300px) and (max-width:480px){.sidediv{display:flex;justify-content:center;align-items:center;flex-direction:column}.toggle-1,.toggle-2{flex-direction:row;margin:0}.toggle-2{align-items:center;display:none;justify-content:center}.toggle-2 ul li{list-style:none;cursor:pointer;font-size:12px;margin:0}.toggle-2 ul{display:flex;flex-direction:row;margin:0}.main-content{top:0}.sidebar{display:none}}</style><meta name="generator" content="Gatsby 2.32.12"/><link id="gist-embed-b3b573358bfc66d89e1e95dbf8319c09" as="style" href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css" rel="preload"/><noscript><link href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css" rel="stylesheet"/></noscript><script>
                  var link = document.querySelector("#gist-embed-b3b573358bfc66d89e1e95dbf8319c09");
                  link.addEventListener("load", function() {
                    this.rel = "stylesheet"
                  });
                </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=7e097cb8c3685ce022171f9583418abe" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=7e097cb8c3685ce022171f9583418abe"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=7e097cb8c3685ce022171f9583418abe"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=7e097cb8c3685ce022171f9583418abe"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=7e097cb8c3685ce022171f9583418abe"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=7e097cb8c3685ce022171f9583418abe"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=7e097cb8c3685ce022171f9583418abe"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=7e097cb8c3685ce022171f9583418abe"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=7e097cb8c3685ce022171f9583418abe"/><title data-react-helmet="true">Effective way to build production quality hadoop jobs (with mahout) | Lambdacurry</title><meta data-react-helmet="true" name="description" content="As I Â started working on building usable data analytics with hadoop, I saw that there were several query languages out there - Pig and Hive being the primaryâ€¦"/><meta data-react-helmet="true" property="og:title" content="Effective way to build production quality hadoop jobs (with mahout)"/><meta data-react-helmet="true" property="og:description" content="As I Â started working on building usable data analytics with hadoop, I saw that there were several query languages out there - Pig and Hive being the primaryâ€¦"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="sandeepssrin"/><meta data-react-helmet="true" name="twitter:title" content="Effective way to build production quality hadoop jobs (with mahout)"/><meta data-react-helmet="true" name="twitter:description" content="As I Â started working on building usable data analytics with hadoop, I saw that there were several query languages out there - Pig and Hive being the primaryâ€¦"/><link as="script" rel="preload" href="/webpack-runtime-93339b6425ff5c9ef959.js"/><link as="script" rel="preload" href="/framework-dbb498007a7447f28d8e.js"/><link as="script" rel="preload" href="/app-626c5ddabf4ecb5e046e.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/046f9c2f8b860a627554038c9d5beea176d88afc-2964655d04f8a3e57890.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-2cfe82937cc99c916b5f.js"/><link as="fetch" rel="preload" href="/page-data/blog/2013-06-17-effective-way-to-build-production-quality-hadoop-jobs-with-mahout/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2778469899.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2882394463.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3616023293.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="background-color:var(--bg);color:var(--textNormal);transition:color 0.2s ease-out, background 0.2s ease-out"><div class="sidebar"><div><h2 class="toggle" style="font-size:2.5rem;line-height:3.5rem;font-family:Montserrat, sans-serif"></h2><div class="sidediv"><div class="toggle-1"><h6>Home</h6><h6>_vimrc</h6><h6>Why-lambdacurry</h6></div><div class="toggle-2"><ul><li>2018</li><li>2017</li><li>2016</li><li>2015</li><li>2014</li><li>2013</li><li>2012</li><li>2011</li><li>2010</li><li>2009</li><li>2008</li><li>2007</li><li>2006</li><li>2005</li><li>2004</li><li></li></ul></div></div></div></div><div class="main-content relative"><main><h1 class="list-head" style="font-size:14px;font-weight:600;letter-spacing:-1px;cursor:pointer"> <!-- -->Lambdacurry<!-- --> </h1><article><header><h1 style="margin-bottom:0;font-weight:600;letter-spacing:-2px;font-size:3rem">Effective way to build production quality hadoop jobs (with mahout)</h1><br/><div class="fragments fragments-separator"></div><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem"></p></header><section style="font-size:14px;font-weight:100;letter-spacing:0.5px;word-spacing:2px"><p>As I Â started working on building usable data analytics with hadoop, I saw that there were several query languages out there - Pig and Hive being the primary ones. My primary goal is to define a reasonable framework for experimentation on Hadoop. My primary goal - deriving insights from data. Least important metric - cool new languages. (Which incidentally seems to fit the end conclusion).</p>
<p>Hive seemed to be the closest fit to the relational model and so serves as a good starting point. A very <a href="http://developer.yahoo.com/blogs/hadoop/comparing-pig-latin-sql-constructing-data-processing-pipelines-444.html">interesting post</a> by Alan Gates @Yahoo made me realize that for most of the tasks out there, the big challenge is to take data and massage it to be usable for big data analysis (for example creating Vectors for Mahoutâ€™s recommenders).</p>
<p>Pig was the next point of experimentation - especially with its ability to work with Jruby UDFs.</p>
<p><div id="gist5795938" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-1-pig" class="file my-2">
    
  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-piglatin  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip>
      <tr>
        <td id="file-1-pig-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-1-pig-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">register</span> .<span class="pl-k">/</span><span class="pl-smi">contrib</span><span class="pl-k">/</span><span class="pl-smi">piggybank</span><span class="pl-k">/</span><span class="pl-smi">java</span><span class="pl-k">/</span><span class="pl-smi">piggybank</span><span class="pl-k">.</span><span class="pl-smi">jar</span>;</td>
      </tr>
      <tr>
        <td id="file-1-pig-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-1-pig-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">register</span> <span class="pl-k">/</span><span class="pl-smi">home</span><span class="pl-k">/</span><span class="pl-smi">user</span><span class="pl-k">/</span><span class="pl-smi">Code</span><span class="pl-k">/</span><span class="pl-smi">hadoop</span><span class="pl-k">/</span><span class="pl-smi">hbase</span><span class="pl-k">-</span><span class="pl-c1">0.94</span><span class="pl-k">.</span><span class="pl-c1">4</span><span class="pl-k">/</span><span class="pl-smi">lib</span><span class="pl-k">/</span><span class="pl-smi">zookeeper</span><span class="pl-k">-</span><span class="pl-c1">3.4</span><span class="pl-k">.</span><span class="pl-c1">5</span><span class="pl-k">.</span><span class="pl-smi">jar</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-1-pig-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">register</span> <span class="pl-k">/</span><span class="pl-smi">home</span><span class="pl-k">/</span><span class="pl-smi">user</span><span class="pl-k">/</span><span class="pl-smi">Code</span><span class="pl-k">/</span><span class="pl-smi">hadoop</span><span class="pl-k">/</span><span class="pl-smi">hbase</span><span class="pl-k">-</span><span class="pl-c1">0.94</span><span class="pl-k">.</span><span class="pl-c1">4</span><span class="pl-k">/</span><span class="pl-smi">hbase</span><span class="pl-k">-</span><span class="pl-c1">0.94</span><span class="pl-k">.</span><span class="pl-c1">4</span><span class="pl-k">.</span><span class="pl-smi">jar</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-1-pig-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">register</span> <span class="pl-k">/</span><span class="pl-smi">home</span><span class="pl-k">/</span><span class="pl-smi">user</span><span class="pl-k">/</span><span class="pl-smi">Code</span><span class="pl-k">/</span><span class="pl-smi">hadoop</span><span class="pl-k">/</span><span class="pl-smi">hbase</span><span class="pl-k">-</span><span class="pl-c1">0.94</span><span class="pl-k">.</span><span class="pl-c1">4</span><span class="pl-k">/</span><span class="pl-smi">lib</span><span class="pl-k">/</span><span class="pl-smi">guava</span><span class="pl-k">-</span><span class="pl-c1">11.0</span><span class="pl-k">.</span><span class="pl-c1">2</span><span class="pl-k">.</span><span class="pl-smi">jar</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-1-pig-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">register</span> <span class="pl-k">/</span><span class="pl-smi">home</span><span class="pl-k">/</span><span class="pl-smi">user</span><span class="pl-k">/</span><span class="pl-smi">Code</span><span class="pl-k">/</span><span class="pl-smi">hadoop</span><span class="pl-k">/</span><span class="pl-smi">hbase</span><span class="pl-k">-</span><span class="pl-c1">0.94</span><span class="pl-k">.</span><span class="pl-c1">4</span><span class="pl-k">/</span><span class="pl-smi">lib</span><span class="pl-k">/</span><span class="pl-smi">protobuf</span><span class="pl-k">-</span><span class="pl-smi">java</span><span class="pl-k">-</span><span class="pl-c1">2.4</span><span class="pl-k">.</span>0a<span class="pl-k">.</span><span class="pl-smi">jar</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-1-pig-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-k">register</span> .<span class="pl-k">/</span><span class="pl-smi">udf</span><span class="pl-k">.</span><span class="pl-smi">rb</span> <span class="pl-k">using</span> <span class="pl-smi">jruby</span> <span class="pl-k">as</span> <span class="pl-smi">uuid_udf</span>;</td>
      </tr>
      <tr>
        <td id="file-1-pig-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-1-pig-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-1-pig-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-1-pig-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/*</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-1-pig-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-c">DEFINE A `access_log_link` CACHE(&#39;hdfs://localhost:54310/user/user/access_log#access_log_link&#39;);</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-1-pig-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-c"></span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-1-pig-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-c">set mapred.cache.localFiles &#39;hdfs://localhost:54310/user/user/access_log#access_log.1&#39;; </span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-1-pig-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-c">set mapred.create.symlink yes;</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-1-pig-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-c">*/</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-1-pig-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/*DEFINE access_log_link CACHE(&#39;hdfs://localhost:54310/user/user/access_log#access_log_link&#39;);</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-1-pig-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-c">*/</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-1-pig-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-k">DEFINE</span> <span class="pl-smi">LogLoader</span> <span class="pl-smi">org</span><span class="pl-k">.</span><span class="pl-smi">apache</span><span class="pl-k">.</span><span class="pl-smi">pig</span><span class="pl-k">.</span><span class="pl-smi">piggybank</span><span class="pl-k">.</span><span class="pl-smi">storage</span><span class="pl-k">.</span><span class="pl-smi">apachelog</span><span class="pl-k">.</span><span class="pl-smi">CommonLogLoader</span>();</td>
      </tr>
      <tr>
        <td id="file-1-pig-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-1-pig-LC17" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-1-pig-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-1-pig-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-k">DEFINE</span> <span class="pl-smi">access_log_link2</span> <span class="pl-c1">CACHE</span>(<span class="pl-s">&#39;hdfs://localhost:54310/user/user/access_log#access_log_link&#39;</span>);</td>
      </tr>
      <tr>
        <td id="file-1-pig-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-1-pig-LC19" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-1-pig-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-1-pig-LC20" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/*log = LOAD &#39;hdfs://localhost:54310/user/user/access_log&#39; USING LogLoader as (remoteAddr, remoteLogname, user, time, method,uri, proto, status, bytes, referer, userAgent);</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-1-pig-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-c">*/</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-1-pig-LC22" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">log</span> = <span class="pl-k">LOAD</span> <span class="pl-s">&#39;hdfs://localhost:54310/user/user/access_log&#39;</span> <span class="pl-k">USING</span> <span class="pl-smi">LogLoader</span> <span class="pl-k">as</span> (<span class="pl-smi">remoteAddr</span>, <span class="pl-smi">remoteLogname</span>, <span class="pl-smi">user</span>, <span class="pl-smi">time</span>, <span class="pl-smi">method</span>,<span class="pl-smi">uri</span>, <span class="pl-smi">proto</span>, <span class="pl-smi">status</span>, <span class="pl-smi">bytes</span>);</td>
      </tr>
      <tr>
        <td id="file-1-pig-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-1-pig-LC23" class="blob-code blob-code-inner js-file-line"><span class="pl-smi">log_id</span> = <span class="pl-k">FOREACH</span> <span class="pl-smi">log</span> <span class="pl-k">GENERATE</span> <span class="pl-smi">uuid_udf</span><span class="pl-k">.</span><span class="pl-smi">uuid</span>(),<span class="pl-smi">remoteAddr</span>, <span class="pl-smi">remoteLogname</span>, <span class="pl-smi">user</span>, <span class="pl-smi">time</span>, <span class="pl-smi">method</span>,<span class="pl-smi">uri</span>, <span class="pl-smi">proto</span>, <span class="pl-smi">status</span>, <span class="pl-smi">bytes</span>;</td>
      </tr>
      <tr>
        <td id="file-1-pig-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-1-pig-LC24" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/*log_id = FOREACH log GENERATE CONCAT(time,CONCAT(remoteAddr, referer)),remoteAddr, remoteLogname, user, time, method,uri, proto, status, bytes;</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-1-pig-LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-c">*/</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-1-pig-LC26" class="blob-code blob-code-inner js-file-line"><span class="pl-c">/*dump log_id;*/</span></td>
      </tr>
      <tr>
        <td id="file-1-pig-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-1-pig-LC27" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-1-pig-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-1-pig-LC28" class="blob-code blob-code-inner js-file-line"><span class="pl-k">store</span> <span class="pl-smi">log_id</span> <span class="pl-k">into</span> <span class="pl-s">&#39;hbase://access&#39;</span> <span class="pl-k">USING</span> <span class="pl-smi">org</span><span class="pl-k">.</span><span class="pl-smi">apache</span><span class="pl-k">.</span><span class="pl-smi">pig</span><span class="pl-k">.</span><span class="pl-smi">backend</span><span class="pl-k">.</span><span class="pl-smi">hadoop</span><span class="pl-k">.</span><span class="pl-smi">hbase</span><span class="pl-k">.</span><span class="pl-c1">HBaseStorage</span>(<span class="pl-s">&#39;log:remoteAddr log:remoteLogname log:user log:time log:method log:uri log:proto log:status log:bytes&#39;</span>);</td>
      </tr>
</table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/sandys/5795938/raw/cf6c567d8dd49e775c2297136b0f3adfc5e9027d/1.pig" style="float:right">view raw</a>
        <a href="https://gist.github.com/sandys/5795938#file-1-pig">1.pig</a>
        hosted with &#10084; by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>
<div id="gist5795938" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-udf-rb" class="file my-2">
    
  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-ruby  ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip>
      <tr>
        <td id="file-udf-rb-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-udf-rb-LC1" class="blob-code blob-code-inner js-file-line"><span class=pl-en>require</span> <span class=pl-s>&#39;pigudf&#39;</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-udf-rb-LC2" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-udf-rb-LC3" class="blob-code blob-code-inner js-file-line"><span class=pl-en>require</span> <span class=pl-s>&#39;java&#39;</span>  <span class=pl-c># Magic line for JRuby - Java interworking</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-udf-rb-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-udf-rb-LC5" class="blob-code blob-code-inner js-file-line"><span class=pl-en>import</span> <span class=pl-en>java</span><span class=pl-kos>.</span><span class=pl-en>util</span><span class=pl-kos>.</span><span class=pl-en>UUID</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-udf-rb-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-udf-rb-LC7" class="blob-code blob-code-inner js-file-line"><span class=pl-k>class</span> <span class=pl-v>JRubyUdf</span> &lt; <span class=pl-v>PigUdf</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-udf-rb-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-udf-rb-LC9" class="blob-code blob-code-inner js-file-line">  <span class=pl-en>outputSchema</span> <span class=pl-s>&quot;uuid:chararray&quot;</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-udf-rb-LC10" class="blob-code blob-code-inner js-file-line">  <span class=pl-k>def</span> <span class=pl-en>uuid</span><span class=pl-kos>(</span><span class=pl-kos>)</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-udf-rb-LC11" class="blob-code blob-code-inner js-file-line">    <span class=pl-en>java</span><span class=pl-kos>.</span><span class=pl-en>util</span><span class=pl-kos>.</span><span class=pl-en>UUID</span><span class=pl-kos>.</span><span class=pl-en>randomUUID</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>.</span><span class=pl-en>toString</span><span class=pl-kos>(</span><span class=pl-kos>)</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-udf-rb-LC12" class="blob-code blob-code-inner js-file-line">  <span class=pl-k>end</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-udf-rb-LC13" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-udf-rb-LC14" class="blob-code blob-code-inner js-file-line">  <span class=pl-en>outputSchema</span> <span class=pl-s>&quot;type:chararray&quot;</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-udf-rb-LC15" class="blob-code blob-code-inner js-file-line">  <span class=pl-k>def</span> <span class=pl-en>type</span><span class=pl-kos>(</span><span class=pl-s1>auditRecord</span><span class=pl-kos>)</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-udf-rb-LC16" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-udf-rb-LC17" class="blob-code blob-code-inner js-file-line">    <span class=pl-kos>(</span><span class=pl-s1>recordPrefix</span><span class=pl-kos>,</span> <span class=pl-s1>recordData</span><span class=pl-kos>)</span> <span class=pl-c1>=</span> <span class=pl-s1>auditRecord</span><span class=pl-kos>.</span><span class=pl-en>split</span><span class=pl-kos>(</span><span class=pl-s>&#39;:&#39;</span><span class=pl-kos>)</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-udf-rb-LC18" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-udf-rb-LC19" class="blob-code blob-code-inner js-file-line">    <span class=pl-c># Generate a hash of all the prefix fields:  node, type and msg</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-udf-rb-LC20" class="blob-code blob-code-inner js-file-line">    <span class=pl-s1>prefixFields</span> <span class=pl-c1>=</span> <span class=pl-v>Hash</span><span class=pl-kos>[</span>*<span class=pl-s1>recordPrefix</span><span class=pl-kos>.</span><span class=pl-en>split</span><span class=pl-kos>(</span><span class=pl-s>&#39; &#39;</span><span class=pl-kos>)</span><span class=pl-kos>.</span><span class=pl-en>map</span> <span class=pl-kos>{</span>|<span class=pl-s1>t</span>| <span class=pl-s1>t</span><span class=pl-kos>.</span><span class=pl-en>split</span><span class=pl-kos>(</span><span class=pl-s>&#39;=&#39;</span><span class=pl-kos>)</span><span class=pl-kos>}</span><span class=pl-kos>.</span><span class=pl-en>flatten</span><span class=pl-kos>]</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-udf-rb-LC21" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-udf-rb-LC22" class="blob-code blob-code-inner js-file-line">    <span class=pl-s1>prefixFields</span><span class=pl-kos>[</span><span class=pl-s>&#39;type&#39;</span><span class=pl-kos>]</span> <span class=pl-c># return the type</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-udf-rb-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-udf-rb-LC24" class="blob-code blob-code-inner js-file-line">  <span class=pl-k>end</span></td>
      </tr>
      <tr>
        <td id="file-udf-rb-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-udf-rb-LC25" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-udf-rb-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-udf-rb-LC26" class="blob-code blob-code-inner js-file-line"><span class=pl-k>end</span></td>
      </tr>
</table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="https://gist.github.com/sandys/5795938/raw/cf6c567d8dd49e775c2297136b0f3adfc5e9027d/udf.rb" style="float:right">view raw</a>
        <a href="https://gist.github.com/sandys/5795938#file-udf-rb">udf.rb</a>
        hosted with &#10084; by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div></p>
<p>This runs fineâ€¦ on your laptop. However, the pig problem happens when you are actually preparing to run this job on a cluster. At that time all the hidden things start to hit you - JARs not being in classpath, JARs not being in the <a href="http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/filecache/DistributedCache.html">distributed cache</a>Â and things start to add up to be a pain. These start impacting you more and more if you are combining more than one toolkit - for example Hadoop + HBase + Mahout.</p>
<p>That said, one of the very interesting points of integration that I stumbled upon was embedding PigÂ <em><strong>inside</strong></em> Python (using Java) or Javascript. (BTW, a lot of this comes via <a href="http://hortonworks.com/blog/new-apache-pig-features-part-2-embedding/">Hortonworks</a>, which is doing interesting things around Hadoop and Pig). That seemed to me as very interesting, however if you notice there is a very quirky piece of code in there :</p>
<blockquote>
<p>P = Pig.compile("""register udf.jar
DEFINE find_centroid FindCentroid(â€˜$centroidsâ€™);</p>
</blockquote>
<p>Essentially, you could write a UDF in Python, then call Pig through Python. The Pig script then calls the UDF. All of this finally gets compiled on-the-fly into a Jar (cos, thatâ€™s what Pig does) and sent to Hadoop. <strong>This</strong> was essentially the step that convinced me that this tooling was unnecessary complex and there ought to be a simpler way.</p>
<p>I realized that Pig and Hive are actually step two in the whole implementation process of mapreduce and Hadoop.</p>
<p>Step one has got to be writing your own custom jobs in Java or Scala and creatingÂ <em>standalone</em> job JARs.</p>
<p>Yes, this is suboptimal since you end up with large sized jars (a simple job JAR with hadoop and mahout ended up being 32MB). Remember that these JARs will be populated to your cluster (and hopefully persisted in the distributed cache for subsequent runs), but when beginning you dont really need to worry about optimization. Secondly, at a later stage you could still this very workflow to create a non-standalone JAR and instead push the dependent libs out by using either</p>
<ul>
<li>theÂ <strong><em>-Dmapred.cache.files</em></strong> variable to force distributed caching of libraries</li>
<li>Â use the handyÂ <em><strong>-libjars</strong></em> variable.</li>
<li>or useÂ <strong>HADOOP_CLASSPATH</strong> environment variable.</li>
</ul>
<p>My Scala code <a href="https://github.com/sandys/distributed-scala-mahout">here</a> is a simple Mahout vector creation algorithm (based on sample data from <a href="http://www.cs.toronto.edu/~tsap/experiments/datasets/index.html">here</a> ) and creates a standalone JAR (usingÂ <strong><em>sbt</em> assembly</strong>)</p></section><hr style="margin-bottom:1.75rem"/><footer><h1 class="list-head" style="font-size:14px;font-weight:600;letter-spacing:-1px"> <!-- -->Lambdacurry<!-- --> </h1><p style="font-size:12px;margin-top:-15px"><i> <!-- -->Effective way to build production quality hadoop jobs (with mahout)<!-- --> </i></p><h1 class="list-head" style="font-size:14px;font-weight:600;letter-spacing:-1px">Published</h1><p style="font-size:12px;margin-top:-15px"><i> <!-- -->June 17, 2013<!-- --> </i></p><div style="margin-bottom:4.375rem"><i><p style="font-size:12px">Find me on Twitter<!-- --> <a href="https://twitter.com/sandeepssrin">@<!-- -->sandeepssrin</a></p></i><i><p style="font-size:12px">Did i make any mistake? Please consider<!-- --> <a href="https://twitter.com/sandeepssrin">sending a pull request.</a></p></i><div class="post-footer"><h1 class="list-head2" style="font-size:14px;font-weight:600;letter-spacing:-1px;cursor:pointer;margin-left:10px">Lambdacurry</h1><h1 class="list-head2" style="font-size:14px;font-weight:600;letter-spacing:-1px;cursor:pointer;margin-left:10px">_vimrc</h1><h1 class="list-head2" style="font-size:14px;font-weight:600;letter-spacing:-1px;cursor:pointer;margin-left:10px">Why-lambdacurry</h1></div></div></footer></article></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-62251910-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2013-06-17-effective-way-to-build-production-quality-hadoop-jobs-with-mahout/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-57fa76c8ad53bd44c5a1.js"],"app":["/app-626c5ddabf4ecb5e046e.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-b0556ce5127c1a3e2490.js"],"component---src-templates-blog-list-tsx":["/component---src-templates-blog-list-tsx-0155b141ff2524a0bec0.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-2cfe82937cc99c916b5f.js"]};/*]]>*/</script><script src="/polyfill-57fa76c8ad53bd44c5a1.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-2cfe82937cc99c916b5f.js" async=""></script><script src="/046f9c2f8b860a627554038c9d5beea176d88afc-2964655d04f8a3e57890.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-626c5ddabf4ecb5e046e.js" async=""></script><script src="/framework-dbb498007a7447f28d8e.js" async=""></script><script src="/webpack-runtime-93339b6425ff5c9ef959.js" async=""></script></body></html>